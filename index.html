<!DOCTYPE html>
<html>
  <head>
    <title>House</title>
    <script src="https://aframe.io/releases/0.7.1/aframe.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="styles.css" />
  </head>
  <body class="background">
    <script src="script.js"></script>

    <div class="map map-container">
      <img src="Assets/map.jpg" width="500px" height="500px" usemap="#map-image">

      <map name="map-image">
        <area alt="0-0" title="0-0" href="" coords="30,0,62,140" shape="rect">
        <area alt="1-0" title="1-0" href="" coords="165,0,195,140" shape="rect">
        <area alt="2-0" title="2-0" href="" coords="305,0,340,140" shape="rect">
        <area alt="3-0" title="3-0" href="" coords="435,0,470,140" shape="rect">
        <area alt="0-1" title="0-1" href="" coords="30,140,62,290" shape="rect">
        <area alt="1-1" title="1-1" href="" coords="165,140,195,290" shape="rect">
        <area alt="2-1" title="2-1" href="" coords="305,140,340,290" shape="rect">
        <area alt="3-1" title="3-1" href="" coords="435,140,470,290" shape="rect">
        <area alt="0-2" title="0-2" href="" coords="30,290,62,440" shape="rect">
        <area alt="1-2" title="1-2" href="" coords="165,290,195,440" shape="rect">
        <area alt="2-2" title="2-2" href="" coords="305,290,340,440" shape="rect">
        <area alt="3-2" title="3-2" href="" coords="435,290,470,440" shape="rect">
        <area alt="0-3" title="0-3" href="" coords="30,440,62,550" shape="rect">
        <area alt="1-3" title="1-3" href="" coords="165,440,195,550" shape="rect">
        <area alt="2-3" title="2-3" href="" coords="305,440,340,550" shape="rect">
        <area alt="3-3" title="3-3" href="" coords="435,440,470,550" shape="rect">
        <area alt="00" title="00" href="" coords="30,110,165,140" shape="rect">
        <area alt="10" title="10" href="" coords="165,110,335,140" shape="rect">
        <area alt="20" title="20" href="" coords="335,110,440,140" shape="rect">
        <area alt="01" title="01" href="" coords="30,265,165,290" shape="rect">
        <area alt="11" title="11" href="" coords="165,265,335,290" shape="rect">
        <area alt="21" title="21" href="" coords="335,265,440,290" shape="rect">
        <area alt="02" title="02" href="" coords="30,410,165,440" shape="rect">
        <area alt="12" title="12" href="" coords="165,410,335,440" shape="rect">
        <area alt="22" title="22" href="" coords="335,410,440,440" shape="rect">
      </map>
    </div>

    <button id="button" class="house solution-button">View Completed House</button>

    <div class="house box-construct">
      <!-- <button id="button" class="solution-button">View Completed House</button> -->

      <a-scene embedded>
        <a-assets>
          <a-asset-item id="blank" src="Assets/blank.glb"></a-asset-item>
          <a-asset-item id="front" src="Assets/front.glb"></a-asset-item>
          <a-asset-item id="back" src="Assets/back.glb"></a-asset-item>
          <a-asset-item id="left" src="Assets/left.glb"></a-asset-item>
          <a-asset-item id="right" src="Assets/right.glb"></a-asset-item>
          <a-asset-item id="top" src="Assets/top.glb"></a-asset-item>
          <a-asset-item id="solution" src="Assets/solution.glb"></a-asset-item>
        </a-assets>

        <a-entity id="solution-house" gltf-model="#solution" position="0 1.8 -1.5" drag-rotate-component visible="false"></a-entity>
        <!-- Original 2d house -->
        <a-entity click-to-replace id="back-house" gltf-model="#blank" position="0 2.35 -1.5" rotation="0 0 0" visible="true"></a-entity>
        <a-entity click-to-replace id="right-house" gltf-model="#blank" position="-0.54 1.85 -1.5" rotation="0 0 90" visible="true"></a-entity>
        <a-entity click-to-replace id="left-house" gltf-model="#blank" position="0.54 1.85 -1.5" rotation="0 0 90" visible="true"></a-entity>
        <a-entity click-to-replace id="front-house" gltf-model="#front" position="0 1.350 -1.449" rotation="0 0 180" visible="true"></a-entity>
        <a-entity click-to-replace id="top-house" gltf-model="#blank" position="0 0.85 -1.5" rotation="0 0 270" visible="true"></a-entity>
        <a-entity click-to-replace id="bottom-house" gltf-model="#blank" position="0 1.85 -1.5" visible="true"></a-entity>

        <a-entity cursor="rayOrigin:mouse"></a-entity>
        <a-camera position="0 0 0" look-controls="enabled:false"></a-camera>

      </a-scene>
      <script type="text/javascript">
        document.getElementById("button").addEventListener("click", () => {
          isHidden= document.getElementById("solution-house").getAttribute('visible') == true;
          console.log(document.getElementById("solution-house").getAttribute('gltf-model'));
          document.getElementById("back-house").setAttribute('visible', isHidden);
          document.getElementById("front-house").setAttribute('visible', isHidden);
          document.getElementById("bottom-house").setAttribute('visible', isHidden);
          document.getElementById("top-house").setAttribute('visible', isHidden);
          document.getElementById("left-house").setAttribute('visible', isHidden);
          document.getElementById("right-house").setAttribute('visible', isHidden);
          document.getElementById("solution-house").setAttribute('visible', !isHidden);
          if(isHidden){
            document.getElementById("button").innerHTML = "View Completed House";
          }
          else{
            document.getElementById("button").innerHTML = "Continue Placing Pieces";
          }
        })
      </script>
    </div>

    <div class="textbox">
      <button class="map go-button" type="button" onclick="showHouse(); changeText()"><b>Go</b></button>
      <button id="next" class="house dialogue-button" type="button" onclick="changeText()" display="inline"><b>&#8594</b></button>
      <button id="nextChoice1" class="house dialogueChoice-button" type="button" onclick="backToChoices1()" display="none"><b>&#8594</b></button>
      <button id="nextChoice2" class="house dialogueChoice-button" type="button" onclick="backToChoices2()" display="none"><b>&#8594</b></button>

      <p id="map" style="visibility:visible"><b>Whiskers</b><br><br>Hi there! I'm Whiskers Fluffikins and this is my brother Mister Fluffikins.
        We just moved here! Our great uncle's mother's daughter's second cousin twice removed recently passed and left us a plot of land. 
        A friendly local already marked our map â€” see that red 'X'? That's where the land is. 
        Unfortunately, all these one-way streets are giving us a headache. 
        Would you be so kind as to be our guide and help us get there?</p>

      <p id="house0" class="hiddenText">(You arrive at an empty plot of land with Whiskers and Mister Fluffikins.)</p>
      <p id="house1" class="hiddenText"><b>Whiskers</b><br><br>Thank you so much for helping out! Can we get your help once more? 
        See, we would really love to build our dream house here! 
        We already know what we want it to look like and we've even begun drawing up a blueprint!</p>
      <!-- show completed house model -->

      <p id="house-choice1" class="hiddenText"><b>Whiskers</b><br><br>Could you help us build our house?</p><br><br>
      <button id="choice1-1" class="hiddenText choice-button" type="button" onclick="choice1Response(this)">But I already helped you.</button>
      <button id="choice1-2" class="hiddenText choice-button" type="button" onclick="changeText()">Absolutely!</button>
      <button id="choice1-3" class="hiddenText choice-button" type="button" onclick="choice1Response(this)">I, uh, think I left the oven on.</button>
      <p id="choice1-1-response" class="hiddenText"><b>Whiskers</b><br><br>Don't worry! We just need a third person to help guide us with 
        the blueprint. We'll do all the heavy lifting, promise! Please help us?</p>
      <!-- loop back to house-choice1 -->
      <p id="choice1-3-response" class="hiddenText"><b>Mister</b><br><br>Hm? But weren't you already out and about when we ran into you?</p>
      <!-- loop back to house-choice1 -->

      <p id="house2" class="hiddenText"><b>Mister</b><br><br>We already placed the front door for you. Can you believe Whiskers wants it to be purple?</p>
      <!-- user places front door -->
      <p id="house3" class="hiddenText"><b>Whiskers</b><br><br>To start with, we need a back door. My brother insists that it must be black.</p>
      <!-- user places back door -->
      <p id="house4" class="hiddenText"><b>Mister</b><br><br>We'd also like a window that wraps around the side of the house.</p>
      <!-- user places both window parts -->
      <p id="house5" class="hiddenText"><b>Whiskers</b><br><br>Lovely! Just one last detail. Mister thinks this is just silly, but I think 
        the house would look wonderful with some decorative painting. A large diagonal across one side of the house 
        and up onto the roof should add a little character!</p>
      <!-- user places decoration parts -->
      <!-- blueprint is folded into finished house model -->
      <p id="house6" class="hiddenText"><b>Mister</b><br><br>Done! Wait just a minute... look at our house! It's all mostly just one color!</p>
      <p id="house7" class="hiddenText"><b>Whiskers</b><br><br>Fish sticks. You have that black back door, brother. And if I do say so
        myself, it sure sticks out like a sore thumb! This is why I wanted it in lavendar.</p>

      <p id="house-choice2" class="hiddenText"><b>Whiskers and Mister</b><br><br>What do you think?</p><br><br>
      <button id="choice2-1" class="hiddenText choice-button" type="button" onclick="choice2Response(this)">Mister is right, a house all in one color is weird!</button>
      <button id="choice2-2" class="hiddenText choice-button" type="button" onclick="choice2Response(this)">Whiskers is right.</button>
      <button id="choice2-3" class="hiddenText choice-button" type="button" onclick="changeText()">It doesn't have to be one or the other.</button>
      <p id="choice2-1-response" class="hiddenText"><b>Mister</b><br><br>Exactly! Wait, but it's not all one color.</p>
      <!-- loop back to house-choice2 -->
      <p id="choice2-2-response" class="hiddenText"><b>Whiskers</b><br><br>Exactly! But why do you think I'm right?</p>
      <!-- loop back to house-choice2 -->

      <p id="house8" class="hiddenText"><b>Whiskers</b><br><br>I suppose you're right! We can always repaint.</p>
      <p id="house9" class="hiddenText"><b>Mister</b><br><br>Well, I know I can't wait to furnish our house. I'm going to make 
        my room sea-themed.</p>
      <p id="house10" class="hiddenText"><b>Whiskers</b><br><br>I've always wanted a bird-themed room. And because we built this 
        house together, it's even more special for me because I know that it's a product of both our hard work!</p>
      <p id="house11" class="hiddenText"><b>Whiskers and Mister</b><br><br>And thank YOU, for helping us build our house and sorting out 
        our sibling quarrels!</p>
      
      <p id="instr" class="hiddenText">(Interact with the completed house to find the feature that the Fluffikins 
        want, then click on the blueprint where you think it should be placed. If it is correct, the wall will appear. 
        Otherwise, try to place in another spot.)</p>
    </div>

  </body>
</html>